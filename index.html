<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>EU Resort Junk Fee Removal - Prompt Tester</title>
      <style>
                * { box-sizing: border-box; }
                body {
                              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                              max-width: 1400px;
                              margin: 0 auto;
                              padding: 20px;
                              background: #1a1a2e;
                              color: #eee;
                }
                h1 { color: #00d4aa; margin-bottom: 5px; }
                .subtitle { color: #888; margin-bottom: 30px; }
                .config-section {
                              background: #16213e;
                              padding: 20px;
                              border-radius: 8px;
                              margin-bottom: 20px;
                }
                .config-section h3 { margin-top: 0; color: #00d4aa; }
                .input-group { margin-bottom: 15px; }
                .input-group label {
                              display: block;
                              margin-bottom: 5px;
                              font-weight: 600;
                              color: #aaa;
                }
                input[type="text"], input[type="password"] {
                              width: 100%;
                              padding: 12px;
                              border: 1px solid #333;
                              border-radius: 6px;
                              background: #0f0f23;
                              color: #fff;
                              font-size: 14px;
                }
                .prompts-container {
                              display: grid;
                              grid-template-columns: 1fr 1fr;
                              gap: 20px;
                              margin-bottom: 20px;
                }
                @media (max-width: 900px) {
                              .prompts-container { grid-template-columns: 1fr; }
                }
                .prompt-card {
                              background: #16213e;
                              padding: 20px;
                              border-radius: 8px;
                }
                .prompt-card h3 {
                              margin-top: 0;
                              color: #00d4aa;
                              display: flex;
                              justify-content: space-between;
                              align-items: center;
                }
                .prompt-card h3 span {
                              font-size: 12px;
                              color: #666;
                              font-weight: normal;
                }
                textarea {
                              width: 100%;
                              height: 300px;
                              padding: 12px;
                              border: 1px solid #333;
                              border-radius: 6px;
                              background: #0f0f23;
                              color: #fff;
                              font-family: 'Monaco', 'Consolas', monospace;
                              font-size: 13px;
                              line-height: 1.5;
                              resize: vertical;
                }
                .btn-container { text-align: center; margin: 30px 0; }
                button {
                              background: #00d4aa;
                              color: #000;
                              border: none;
                              padding: 15px 50px;
                              font-size: 16px;
                              font-weight: 600;
                              border-radius: 8px;
                              cursor: pointer;
                              transition: all 0.2s;
                }
                button:hover { background: #00f5c4; transform: translateY(-2px); }
                button:disabled {
                              background: #333;
                              color: #666;
                              cursor: not-allowed;
                              transform: none;
                }
                .output-section {
                              background: #16213e;
                              padding: 20px;
                              border-radius: 8px;
                }
                .output-section h3 { margin-top: 0; color: #00d4aa; }
                #output {
                              background: #0f0f23;
                              padding: 15px;
                              border-radius: 6px;
                              min-height: 200px;
                              white-space: pre-wrap;
                              font-family: 'Monaco', 'Consolas', monospace;
                              font-size: 13px;
                              overflow-x: auto;
                }
                .status {
                              padding: 10px 15px;
                              border-radius: 6px;
                              margin-bottom: 15px;
                              display: none;
                }
                .status.loading { display: block; background: #1e3a5f; color: #7dd3fc; }
                .status.error { display: block; background: #5f1e1e; color: #fca5a5; }
                .status.success { display: block; background: #1e5f3a; color: #86efac; }
                .reset-btn {
                              background: #333;
                              color: #aaa;
                              padding: 8px 16px;
                              font-size: 12px;
                              margin-left: 10px;
                }
                .reset-btn:hover { background: #444; color: #fff; }
            </style>
  </head>
  <body>
        <h1>EU Resort Junk Fee Removal</h1>
      <p class="subtitle">RAI and Policies - Prompt Testing Interface</p>p>
  
      <div class="config-section">
              <h3>Configuration</h3>
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                          <div class="input-group">
                                          <label>API Key</label>
                                          <input type="password" id="apiKey" placeholder="Enter your Langflow API key">
                          </div>div>
                          <div class="input-group">
                                          <label>Resort ID (input_value)</label>
                                          <input type="text" id="resortId" placeholder="e.g., 5642" value="5642">
                          </div>div>
              </div>div>
      </div>div>
  
      <div class="prompts-container">
              <div class="prompt-card">
                          <h3>
                                          Policies Prompt
                                          <span>Prompt Template-AVk4F</span>
                          </h3>
                          <textarea id="policiesPrompt">You need to check and modify the policy elements as follows:
                          
                          ---
                          
                          Instructions
                          
                          What to remove:
                          - Any words, phrases, sentences, or HTML elements that explicitly state a fee is mandatory, required, or non-refundable (unless it is refundable).
                          - Any mentions of the following fee types (not case sensitive), including their HTML containers:
                            - resort fee, holiday tax, Eco tax, destination fee, service fee, facility fee, amenity fee, utility surcharge, property fee
                          - Any patterns such as: per night, per stay, nightly, daily, each reservation when attached to mandatory fees.
                          - Sentences like: This fee is mandatory for all guests requiring parking.
                          
                          Removal approach with HTML nesting:
                          - Remove the entire HTML element containing the mandatory, non-refundable fee mention.
                          - If the mention is within a nested tag, remove the entire outer HTML element.
                          
                          EDGE CASES:
                          Cleaning fees should also be removed altogether. However, distinguish between cleaning fees and cleaning fines for policy violations or damages. A cleaning fine is not a mandatory fee. Replace cleaning fee with cleaning fine when punitive terms are present.
                          
                          What NOT to do:
                          - Do NOT reword, paraphrase, or modify remaining text.
                          - Do NOT invent or add new text.
                          - Do NOT remove refundable and optional fees (e.g. damage deposits, parking, housekeeping).
                          - Do NOT remove conditional charges (e.g. parking fee if only charged upon use).
                          - Do NOT remove cleaning fees if they are penalties or pet-related.
                          - Do NOT strip HTML tags for text elements not targeted for removal.
                          
                          Output Requirements:
                          - Return the entire JSON document with only the text attribute updated in each policy element that required cleaning.
                          - Leave all other JSON keys, values, structure, and formatting exactly as is.
                          - Return only the updated JSON document. Do not include explanations.
                          
                          IMPORTANT! Return only the updated JSON document. Nothing else.
                          
                          ---
                          
                          {Policies}
                          Output ONLY the JSON object with the fields to update.
                          Do NOT wrap it in an extracted key or any other wrapper.
                          Return valid JSON directly.</textarea>
                          <button class="reset-btn" onclick="resetPoliciesPrompt()">Reset to Default</button>button>
              </div>div>
      
              <div class="prompt-card">
                          <h3>
                                          ArrivalInfo Prompt
                                          <span>Prompt Template-9r1K1</span>
                          </h3>
                          <textarea id="arrivalInfoPrompt">{arrivalInfo}
                          Your task is to clean a single HTML string by removing mentions of mandatory or non-refundable fees in the arrivalInfo field. The output should not include the explanation of what was done.
                          
                          ---
                          
                          Remove any text spans that:
                          - Mention: resort fee, destination fee, holiday tax, service fee, facility fee, amenity fee, cleaning fee, utility surcharge, or property fee
                          - Include: per night, per stay, nightly, daily, each reservation, etc.
                          
                          ---
                          
                          Do not Remove:
                          - Damage deposits.
                          Return a JSON object with HTML tags in this format:
                          
                          LongDescription
                          
                          ---
                          
                          Output ONLY the JSON object with the fields to update.
                          Do NOT wrap it in an extracted key or any other wrapper.
                          Return valid JSON directly.</textarea>
                          <button class="reset-btn" onclick="resetArrivalInfoPrompt()">Reset to Default</button>button>
              </div>div>
      </div>div>
  
      <div class="btn-container">
              <button id="runBtn" onclick="runFlow()">Run Flow</button>button>
      </div>div>
  
      <div class="output-section">
              <h3>Output</h3>
              <div id="status" class="status"></div>div>
              <div id="output">Results will appear here...</div>div>
      </div>div>
  
      <script>
                const API_URL = 'https://langflow-staging.leavetown.com/api/v1/run/8cda597f-c9c5-4440-827d-862142a271f9';

                const defaultPoliciesPrompt = document.getElementById('policiesPrompt').value;
                const defaultArrivalInfoPrompt = document.getElementById('arrivalInfoPrompt').value;

                function resetPoliciesPrompt() {
                              document.getElementById('policiesPrompt').value = defaultPoliciesPrompt;
                }

                function resetArrivalInfoPrompt() {
                              document.getElementById('arrivalInfoPrompt').value = defaultArrivalInfoPrompt;
                }

                async function runFlow() {
                              const apiKey = document.getElementById('apiKey').value.trim();
                              const resortId = document.getElementById('resortId').value.trim();
                              const policiesPrompt = document.getElementById('policiesPrompt').value;
                              const arrivalInfoPrompt = document.getElementById('arrivalInfoPrompt').value;
                              const statusEl = document.getElementById('status');
                              const outputEl = document.getElementById('output');
                              const runBtn = document.getElementById('runBtn');

                              if (!apiKey) {
                                                statusEl.className = 'status error';
                                                statusEl.textContent = 'Please enter your API key';
                                                return;
                              }

                              runBtn.disabled = true;
                              runBtn.textContent = 'Running...';
                              statusEl.className = 'status loading';
                              statusEl.textContent = 'Calling Langflow API...';
                              outputEl.textContent = '';

                              const payload = {
                                                output_type: 'chat',
                                                input_type: 'chat',
                                                input_value: resortId,
                                                tweaks: {
                                                                      'Prompt Template-AVk4F': {
                                                                                                template: policiesPrompt
                                                                      },
                                                                      'Prompt Template-9r1K1': {
                                                                                                template: arrivalInfoPrompt
                                                                      }
                                                }
                              };

                              try {
                                                const response = await fetch(API_URL, {
                                                                      method: 'POST',
                                                                      headers: {
                                                                                                'Content-Type': 'application/json',
                                                                                                'x-api-key': apiKey
                                                                        },
                                                                      body: JSON.stringify(payload)
                                                });

                                                if (!response.ok) {
                                                                      throw new Error('HTTP ' + response.status + ': ' + response.statusText);
                                                }

                                                const data = await response.json();

                                                statusEl.className = 'status success';
                                                statusEl.textContent = 'Flow completed successfully!';
                                                outputEl.textContent = JSON.stringify(data, null, 2);

                              } catch (error) {
                                                statusEl.className = 'status error';
                                                statusEl.textContent = 'Error: ' + error.message;
                                                outputEl.textContent = error.toString();
                              } finally {
                                                runBtn.disabled = false;
                                                runBtn.textContent = 'Run Flow';
                              }
                }

                const savedApiKey = localStorage.getItem('langflow_api_key');
                if (savedApiKey) {
                              document.getElementById('apiKey').value = savedApiKey;
                }

                document.getElementById('apiKey').addEventListener('change', function(e) {
                              localStorage.setItem('langflow_api_key', e.target.value);
                });
      </script>
  </body>
</html>html>
      </script></span></span></label></label></h3></h1>
  </body>
      </style></title>
  </head>
